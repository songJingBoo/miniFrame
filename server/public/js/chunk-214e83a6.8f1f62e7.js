(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214e83a6"],{"08fc":function(e,n,t){"use strict";t("ad8f")},"587c":function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BasePage",[t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.treeData,"node-key":"id","show-checkbox":e.showCheckBox,"default-checked-keys":e.defaultCheckedKeys,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.node,r=n.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(r.menu_name))]),e.showOperateBtn?t("span",[r.noChild?e._e():t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.config(r,"append")}}},[e._v("新增子模块")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.config(r,"edit")}}},[e._v("编辑")]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(a,r)}}},[e._v("删除")])],1):e._e()])}}])}),t("el-dialog",{attrs:{title:"append"===e.configType?"新增子模块":"编辑节点",visible:e.showDialog,"before-close":e.dialogCancle,customClass:"customWidth"},on:{"update:visible":function(n){e.showDialog=n}}},[t("el-form",{ref:"dialogRef",attrs:{"label-width":"100px",model:e.form,rules:e.rules}},["append"===e.configType?t("el-form-item",{attrs:{label:"父模块名称",prop:"parent_menu_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.parent_menu_name,callback:function(n){e.$set(e.form,"parent_menu_name",n)},expression:"form.parent_menu_name"}})],1):e._e(),t("el-form-item",{attrs:{label:"append"===e.configType?"子模块名称":"节点名称",prop:"menu_name"}},[t("el-input",{model:{value:e.form.menu_name,callback:function(n){e.$set(e.form,"menu_name",n)},expression:"form.menu_name"}})],1),t("el-form-item",{attrs:{label:"append"===e.configType?"子模块编码":"节点编码",prop:"menu_code"}},[t("el-input",{model:{value:e.form.menu_code,callback:function(n){e.$set(e.form,"menu_code",n)},expression:"form.menu_code"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.dialogCancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("确 定")])],1)],1)],1)},r=[],o=t("1da1"),i=(t("d81d"),t("159b"),t("96cf"),t("c24f")),s={props:{showCheckBox:{type:Boolean,default:!0},showOperateBtn:{type:Boolean,default:!0},defaultCheckedKeys:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,showDialog:!1,treeData:[],form:{parent_menu_id:"",parent_menu_name:"",menu_name:"",menu_code:""},rules:{menu_name:[{required:!0,message:"请输入子模块名称"}],menu_code:[{required:!0,message:"请输入子模块编码"}]},configType:""}},methods:{getPermissionInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,Object(i["j"])();case 4:t=n.sent,200===t.status&&(e.treeData=e.handleRes(t.data||[]));case 6:return n.prev=6,e.loading=!1,n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[0,,6,9]])})))()},handleRes:function(e){var n=this;return e.map((function(e){var t;return null!==(t=e.child)&&void 0!==t&&t.length?(e.children=n.handleRes(e.child),e.children.forEach((function(e){e.noChild=!0}))):e.children=[],e}))},dialogCancle:function(){this.showDialog=!1,this.$refs.dialogRef.resetFields()},dialogSubmit:function(){var e=this;this.$refs.dialogRef.validate(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(t){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return a={id:e.form.id,menuName:e.form.menu_name,menuCode:e.form.menu_code,parentId:e.form.parent_menu_id},n.next=4,Object(i["a"])(a);case 4:r=n.sent,200===r.status&&(e.getPermissionInfo(),e.dialogCancle());case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},config:function(e,n){this.configType=n,this.form="append"===n?{parent_menu_id:e.id,parent_menu_name:e.menu_name,menu_name:"",menu_code:""}:{id:e.id,parent_menu_id:e.parent_id,parent_menu_name:"",menu_name:e.menu_name,menu_code:e.menu_code},this.showDialog=!0},remove:function(e,n){var t=this;this.$confirm("确认删除该模块节点？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["i"])({ids:[n.id]});case 2:r=a.sent,200===r.status&&(e.remove(),t.$message.success("删除菜单成功！"));case 4:case"end":return a.stop()}}),a)}))))},getCheckedKey:function(){return this.$refs.tree.getCheckedKeys()}},created:function(){this.getPermissionInfo()}},u=s,c=(t("08fc"),t("2877")),l=Object(c["a"])(u,a,r,!1,null,null,null);n["default"]=l.exports},ad8f:function(e,n,t){}}]);
//# sourceMappingURL=chunk-214e83a6.8f1f62e7.js.map