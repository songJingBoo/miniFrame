(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-080c0d14"],{"0ae1":function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("BasePage",[t("div",{staticClass:"module-tree-wrap"},[t("h3",[e._v("菜单配置")]),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",attrs:{data:e.treeData,"node-key":"id","show-checkbox":!1,"default-checked-keys":e.defaultCheckedKeys,"default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(a.menu_name))]),t("span",[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.config(a)}}},[e._v("配置")])],1)])}}])}),t("el-dialog",{attrs:{title:"配置菜单",visible:e.showDialog,"before-close":e.dialogCancle,customClass:"customWidth"},on:{"update:visible":function(n){e.showDialog=n}}},[t("el-form",{ref:"dialogRef",attrs:{"label-width":"100px",model:e.form,rules:e.rules}},[t("el-form-item",{attrs:{label:"模块名称",prop:"menu_name"}},[t("el-input",{attrs:{disabled:""},model:{value:e.form.menu_name,callback:function(n){e.$set(e.form,"menu_name",n)},expression:"form.menu_name"}})],1),t("el-form-item",{attrs:{label:"模块编码",prop:"menu_code"}},[t("el-input",{model:{value:e.form.menu_code,callback:function(n){e.$set(e.form,"menu_code",n)},expression:"form.menu_code"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.dialogCancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("确 定")])],1)],1)],1)])},r=[],o=t("1da1"),i=(t("d81d"),t("159b"),t("96cf"),t("c24f")),s={props:{defaultCheckedKeys:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,showDialog:!1,treeData:[],form:{id:"",menu_code:"",menu_name:"",parent_id:""},rules:{menu_code:[{required:!0,message:"请输入模块编码"}]},configType:""}},methods:{getPermissionInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,Object(i["j"])();case 4:t=n.sent,200===t.status&&(e.treeData=e.handleRes(t.data||[]));case 6:return n.prev=6,e.loading=!1,n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[0,,6,9]])})))()},handleRes:function(e){var n=this;return e.map((function(e){var t;return null!==(t=e.child)&&void 0!==t&&t.length?(e.children=n.handleRes(e.child),e.children.forEach((function(e){e.noChild=!0}))):e.children=[],e}))},dialogCancle:function(){this.showDialog=!1,this.$refs.dialogRef.resetFields()},dialogSubmit:function(){var e=this;this.$refs.dialogRef.validate(function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(t){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=6;break}return a={id:e.form.id,menuCode:e.form.menu_code,menuName:e.form.menu_name,parentId:e.form.parent_id},n.next=4,Object(i["a"])(a);case 4:r=n.sent,200===r.status&&(e.getPermissionInfo(),e.dialogCancle(),e.$store.dispatch("updateMenu"),e.$message.success("菜单配置成功！"));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},config:function(e){this.form={id:e.id,menu_code:e.menu_code,menu_name:e.menu_name,parent_id:e.parent_id},this.showDialog=!0}},created:function(){this.getPermissionInfo()}},l=s,u=(t("a99b"),t("2877")),c=Object(u["a"])(l,a,r,!1,null,null,null);n["default"]=c.exports},"9f86":function(e,n,t){},a99b:function(e,n,t){"use strict";t("9f86")}}]);
//# sourceMappingURL=chunk-080c0d14.984e9042.js.map