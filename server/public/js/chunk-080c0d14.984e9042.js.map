{"version":3,"sources":["webpack:///./src/views/permission/menu.vue?55c7","webpack:///src/views/permission/menu.vue","webpack:///./src/views/permission/menu.vue?2856","webpack:///./src/views/permission/menu.vue","webpack:///./src/views/permission/menu.vue?1a95"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","ref","attrs","treeData","defaultCheckedKeys","scopedSlots","_u","key","fn","data","_s","menu_name","on","$event","config","showDialog","dialogCancle","form","rules","model","callback","$$v","$set","slot","dialogSubmit","staticRenderFns","props","type","Array","default","loading","id","menu_code","parent_id","configType","methods","handleRes","map","item","children","forEach","$refs","dialogRef","resetFields","validate","created","getPermissionInfo","component"],"mappings":"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","file":"js/chunk-080c0d14.984e9042.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BasePage',[_c('div',{staticClass:\"module-tree-wrap\"},[_c('h3',[_vm._v(\"菜单配置\")]),_c('el-tree',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"tree\",attrs:{\"data\":_vm.treeData,\"node-key\":\"id\",\"show-checkbox\":false,\"default-checked-keys\":_vm.defaultCheckedKeys,\"default-expand-all\":\"\",\"expand-on-click-node\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(data.menu_name))]),_c('span',[_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.config(data)}}},[_vm._v(\"配置\")])],1)])}}])}),_c('el-dialog',{attrs:{\"title\":\"配置菜单\",\"visible\":_vm.showDialog,\"before-close\":_vm.dialogCancle,\"customClass\":\"customWidth\"},on:{\"update:visible\":function($event){_vm.showDialog=$event}}},[_c('el-form',{ref:\"dialogRef\",attrs:{\"label-width\":\"100px\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"模块名称\",\"prop\":\"menu_name\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.form.menu_name),callback:function ($$v) {_vm.$set(_vm.form, \"menu_name\", $$v)},expression:\"form.menu_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"模块编码\",\"prop\":\"menu_code\"}},[_c('el-input',{model:{value:(_vm.form.menu_code),callback:function ($$v) {_vm.$set(_vm.form, \"menu_code\", $$v)},expression:\"form.menu_code\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.dialogCancle}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.dialogSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <BasePage>\r\n    <div class='module-tree-wrap'>\r\n      <h3>菜单配置</h3>\r\n      <el-tree\r\n        :data='treeData'\r\n        ref='tree'\r\n        node-key='id'\r\n        v-loading='loading'\r\n        :show-checkbox='false'\r\n        :default-checked-keys='defaultCheckedKeys'\r\n        default-expand-all\r\n        :expand-on-click-node='false'\r\n        >\r\n        <span class='custom-tree-node' slot-scope='{ data }'>\r\n            <span>{{ data.menu_name }}</span>\r\n            <span >\r\n            <el-button type='text' size='mini' @click='config(data)'>配置</el-button>\r\n            </span>\r\n        </span>\r\n        </el-tree>\r\n\r\n        <!-- 配置菜单 -->\r\n        <el-dialog\r\n            title=\"配置菜单\"\r\n            :visible.sync=\"showDialog\"\r\n            :before-close=\"dialogCancle\"\r\n            customClass=\"customWidth\">\r\n            <el-form ref=\"dialogRef\" label-width=\"100px\" :model=\"form\" :rules=\"rules\">\r\n                <el-form-item label=\"模块名称\" prop=\"menu_name\">\r\n                    <el-input v-model=\"form.menu_name\" disabled></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"模块编码\" prop=\"menu_code\">\r\n                    <el-input v-model=\"form.menu_code\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogCancle\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"dialogSubmit\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n  </BasePage>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getPermissionInfo,\r\n  addOrEditPermission\r\n} from '@/api/user'\r\n\r\nexport default {\r\n  props: {\r\n    defaultCheckedKeys: {\r\n      type: Array,\r\n      default: () => {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      loading: false,\r\n      showDialog: false,\r\n      treeData: [],\r\n      form: {\r\n        id: '',\r\n        menu_code: '',\r\n        menu_name: '',\r\n        parent_id: ''\r\n      },\r\n      rules: {\r\n        menu_code: [{ required: true, message: '请输入模块编码' }]\r\n      },\r\n      configType: ''\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async getPermissionInfo () {\r\n      try {\r\n        this.loading = true\r\n        const res = await getPermissionInfo()\r\n        if (res.status === 200) {\r\n          this.treeData = this.handleRes(res.data || [])\r\n        }\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    handleRes (data) {\r\n      return data.map((item) => {\r\n        if (item.child?.length) {\r\n          item.children = this.handleRes(item.child)\r\n          // 子模块不支持新增子模块\r\n          item.children.forEach(item => { item.noChild = true })\r\n        } else {\r\n          item.children = []\r\n        }\r\n        return item\r\n      })\r\n    },\r\n    dialogCancle () {\r\n      this.showDialog = false\r\n      this.$refs.dialogRef.resetFields()\r\n    },\r\n    dialogSubmit () {\r\n      this.$refs.dialogRef.validate(async (valid) => {\r\n        if (valid) {\r\n          const params = {\r\n            id: this.form.id,\r\n            menuCode: this.form.menu_code,\r\n            menuName: this.form.menu_name,\r\n            parentId: this.form.parent_id\r\n          }\r\n          const res = await addOrEditPermission(params)\r\n          if (res.status === 200) {\r\n            this.getPermissionInfo()\r\n            this.dialogCancle()\r\n            this.$store.dispatch('updateMenu')\r\n            this.$message.success('菜单配置成功！')\r\n          }\r\n        }\r\n      })\r\n    },\r\n    config (data) {\r\n      this.form = {\r\n        id: data.id,\r\n        menu_code: data.menu_code,\r\n        menu_name: data.menu_name,\r\n        parent_id: data.parent_id\r\n      }\r\n      this.showDialog = true\r\n    }\r\n  },\r\n  created () {\r\n    this.getPermissionInfo()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.custom-tree-node {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 14px;\r\n  padding-right: 8px;\r\n}\r\n.customWidth {\r\n  width: 500px;\r\n  padding-right: 30px;\r\n}\r\n\r\n.module-tree-wrap {\r\n  width: 540px;\r\n  box-shadow: #ccc 0px 2px 8px;\r\n  padding: 20px;\r\n\r\n  h3 {\r\n    padding: 0 25px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=5d769c1a&\"\nimport script from \"./menu.vue?vue&type=script&lang=js&\"\nexport * from \"./menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}