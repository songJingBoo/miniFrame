{"version":3,"sources":["webpack:///./src/views/register.vue?94ee","webpack:///src/views/register.vue","webpack:///./src/views/register.vue?273d","webpack:///./src/views/register.vue","webpack:///./src/views/register.vue?0cc9"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","loginForm","rules","_v","model","value","callback","$$v","$set","expression","showPwd","on","$event","togglePwd","captchaUrl","updateCaptcha","staticStyle","nativeOn","preventDefault","submitForm","apply","arguments","staticRenderFns","name","data","email","nickname","password","rePassword","captcha","redirect","otherQuery","watch","$route","handler","query","getOtherQuery","immediate","methods","$nextTick","$refs","validate","Object","keys","reduce","cur","acc","component"],"mappings":"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","file":"js/chunk-5742ea17.760888f7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"form-container\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules}},[_c('div',{staticClass:\"title-container\"},[_c('h2',{staticClass:\"title\"},[_vm._v(\"注 册\")])]),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"type\":\"email\",\"prefix-icon\":\"el-icon-s-custom\",\"placeholder\":\"Email\"},model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"prefix-icon\":\"el-icon-s-custom\",\"placeholder\":\"nickname\"},model:{value:(_vm.loginForm.nickname),callback:function ($$v) {_vm.$set(_vm.loginForm, \"nickname\", $$v)},expression:\"loginForm.nickname\"}})],1),_c('el-form-item',{staticClass:\"password-box\",attrs:{\"prop\":\"password\"}},[_c('el-input',{ref:\"password\",attrs:{\"autocomplete\":\"off\",\"type\":_vm.showPwd ? 'text' : 'password',\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"请设置密码\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}}),_c('span',{staticClass:\"password-icon\",on:{\"click\":function($event){return _vm.togglePwd()}}},[_c('svg-icon',{attrs:{\"icon-class\":_vm.showPwd ? 'open' : 'close'}})],1)],1),_c('el-form-item',{staticClass:\"password-box\",attrs:{\"prop\":\"rePassword\"}},[_c('el-input',{ref:\"rePassword\",attrs:{\"autocomplete\":\"off\",\"type\":_vm.showPwd ? 'text' : 'password',\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"再次输入密码\"},model:{value:(_vm.loginForm.rePassword),callback:function ($$v) {_vm.$set(_vm.loginForm, \"rePassword\", $$v)},expression:\"loginForm.rePassword\"}}),_c('span',{staticClass:\"password-icon\",on:{\"click\":function($event){return _vm.togglePwd()}}},[_c('svg-icon',{attrs:{\"icon-class\":_vm.showPwd ? 'open' : 'close'}})],1)],1),_c('el-form-item',{attrs:{\"prop\":\"captcha\"}},[_c('el-input',{staticClass:\"captch-input\",attrs:{\"autocomplete\":\"off\",\"prefix-icon\":\"el-icon-lock\",\"placeholder\":\"验证码\"},model:{value:(_vm.loginForm.captcha),callback:function ($$v) {_vm.$set(_vm.loginForm, \"captcha\", $$v)},expression:\"loginForm.captcha\"}}),_c('img',{staticClass:\"captch-input__img\",attrs:{\"src\":_vm.captchaUrl,\"alt\":\"\"},on:{\"click\":_vm.updateCaptcha}})],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"30px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.submitForm.apply(null, arguments)}}},[_vm._v(\"注 册\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" class=\"form-container\">\n\n      <div class=\"title-container\">\n        <h2 class=\"title\">注 册</h2>\n      </div>\n\n      <el-form-item prop=\"email\">\n        <el-input\n          v-model=\"loginForm.email\"\n          autocomplete=\"off\"\n          type=\"email\"\n          prefix-icon=\"el-icon-s-custom\"\n          placeholder=\"Email\">\n        </el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"nickname\">\n        <el-input\n          v-model=\"loginForm.nickname\"\n          autocomplete=\"off\"\n          prefix-icon=\"el-icon-s-custom\"\n          placeholder=\"nickname\">\n        </el-input>\n      </el-form-item>\n\n      <el-form-item prop=\"password\" class=\"password-box\">\n        <el-input\n          ref=\"password\"\n          v-model=\"loginForm.password\"\n          autocomplete=\"off\"\n          :type=\"showPwd ? 'text' : 'password'\"\n          prefix-icon=\"el-icon-lock\"\n          placeholder=\"请设置密码\">\n        </el-input>\n        <span class=\"password-icon\" @click=\"togglePwd()\">\n          <svg-icon :icon-class=\"showPwd ? 'open' : 'close'\"></svg-icon>\n        </span>\n      </el-form-item>\n\n      <el-form-item prop=\"rePassword\" class=\"password-box\">\n        <el-input\n          ref=\"rePassword\"\n          v-model=\"loginForm.rePassword\"\n          autocomplete=\"off\"\n          :type=\"showPwd ? 'text' : 'password'\"\n          prefix-icon=\"el-icon-lock\"\n          placeholder=\"再次输入密码\">\n        </el-input>\n        <span class=\"password-icon\" @click=\"togglePwd()\">\n          <svg-icon :icon-class=\"showPwd ? 'open' : 'close'\"></svg-icon>\n        </span>\n      </el-form-item>\n\n      <el-form-item prop=\"captcha\">\n        <el-input\n          class=\"captch-input\"\n          v-model=\"loginForm.captcha\"\n          autocomplete=\"off\"\n          prefix-icon=\"el-icon-lock\"\n          placeholder=\"验证码\">\n        </el-input>\n        <img class=\"captch-input__img\" @click=\"updateCaptcha\" :src=\"captchaUrl\" alt=\"\">\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" style=\"width:100%;margin-bottom:30px;\" @click.native.prevent=\"submitForm\">注 册</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport md5 from 'md5'\nimport { register } from '@/api/login'\n\nexport default {\n  name: 'login',\n  data () {\n    return {\n      loginForm: {\n        email: '123@qq.com',\n        nickname: 'test-user',\n        password: 'zsxdc153',\n        rePassword: 'zsxdc153',\n        captcha: ''\n      },\n      rules: {\n        email: [\n          { required: true, message: '请输入邮箱' },\n          { type: 'email', message: '请输入正确的邮箱格式' }\n        ],\n        nickname: [\n          { required: true, message: '请输入用户名' }\n        ],\n        password: [\n          { required: true, pattern: /^[\\w_-]{6,12}$/g, message: '请输入6~12位密码' }\n        ],\n        rePassword: [\n          { required: true, message: '请再次输入密码' },\n          {\n            validator: (rule, value, callback) => {\n              if (value !== this.loginForm.password) {\n                callback(new Error('两次密码不一致'))\n              }\n              callback()\n            }\n          }\n        ],\n        captcha: [\n          { required: true, message: '请输入验证码' }\n        ]\n      },\n      captchaUrl: `${process.env.VUE_APP_BASE_API}/captcha`,\n      showPwd: false,\n      redirect: '', // 回源地址\n      otherQuery: '' // 路径其他传值\n    }\n  },\n  watch: {\n    $route: {\n      handler: function (route) {\n        const query = route.query\n        if (query) {\n          this.redirect = query.redirect\n          this.otherQuery = this.getOtherQuery(query)\n        }\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    updateCaptcha () {\n      this.captchaUrl = `${process.env.VUE_APP_BASE_API}/captcha?v=${new Date().getTime()}`\n    },\n    togglePwd () {\n      this.showPwd = !this.showPwd\n      // 否则焦点在最前面\n      this.$nextTick(() => {\n        this.$refs.password.focus()\n      })\n    },\n    submitForm () {\n      this.$refs.loginForm.validate(async valid => {\n        if (valid) {\n          const param = {\n            email: this.loginForm.email,\n            nickname: this.loginForm.nickname,\n            password: md5(this.loginForm.password),\n            captcha: this.loginForm.captcha\n          }\n          const res = await register(param)\n          if (res.code === 200) {\n            this.$alert('注册成功!', '成功', {\n              confirmButtonText: '去登录',\n              callback: () => {\n                this.$router.push('/login')\n              }\n            })\n          } else {\n            this.$message.error(res.message)\n          }\n        }\n      })\n    },\n    getOtherQuery (query) {\n      return Object.keys(query).reduce((acc, cur) => {\n        if (cur !== 'redirect') {\n          acc[cur] = query[cur]\n        }\n        return acc\n      }, {})\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.login {\n  background-color: #2d3a4b;\n  height: 100%;\n  width: 100%;\n}\n\n.form-container {\n  width: 520px;\n  max-width: 100%;\n  padding: 40px;\n  margin: 0 auto;\n  padding-top: 240px;\n}\n.password-box {\n  position: relative;\n  .password-icon {\n    position: absolute;\n    right: 0;\n    width: 40px;\n    text-align: center;\n    cursor: pointer;\n  }\n}\n\n.title {\n  text-align: center;\n  color: #fff;\n}\n\n.captch-input {\n  width: calc(100% - 110px);\n\n  &__img {\n    background: #fff;\n    border-radius: 4px;\n    vertical-align: middle;\n    margin-left: 10px;\n  }\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=3588a2d4&scoped=true&\"\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./register.vue?vue&type=style&index=0&id=3588a2d4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3588a2d4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=style&index=0&id=3588a2d4&lang=scss&scoped=true&\""],"sourceRoot":""}